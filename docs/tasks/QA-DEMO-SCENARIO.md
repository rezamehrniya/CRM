# چک‌لیست QA — سناریوی دمو Sakhtar CRM

**Tenant دمو:** `demo`  
**کاربر تست:** OWNER (مثلاً `owner@demo.com` / `12345678`)  
**مرجع سناریو:** [../demo/DEMO-SCENARIO.md](../demo/DEMO-SCENARIO.md)

---

## پیش‌نیاز

- [ ] Tenant `demo` در دیتابیس وجود دارد و وضعیت ACTIVE دارد.
- [ ] کاربر تست با نقش OWNER و عضویت فعال در tenant `demo` وجود دارد.
- [ ] Backend و Frontend در حال اجرا هستند (یا محیط staging آماده است).
- [ ] مسیر ورود: `/t/demo/app/login` (یا URL واقعی erp.sakhtar.net).

---

## گام ۱ — ورود به سیستم

- [ ] ورود با `owner@demo.com` / `12345678` بدون خطا انجام می‌شود.
- [ ] پس از ورود، ریدایرکت به `/t/demo/app` (داشبورد) انجام می‌شود.
- [ ] داشبورد با KPIها (لیدها، معامله‌ها، تسک‌های امروز یا معادل) نمایش داده می‌شود.
- [ ] منوی سایدبار شامل «تنظیمات» است (نقش OWNER).
- [ ] هدر شامل جستجو، توگل تم، نمایش کاربر و دکمه خروج است.

---

## گام ۲ — ایجاد لید (مخاطب جدید)

- [ ] از منو «مخاطبین» انتخاب می‌شود و صفحه لیست مخاطبین باز می‌شود.
- [ ] دکمه «افزودن مخاطب» یا «مخاطب جدید» وجود دارد و مودال/فرم باز می‌شود.
- [ ] پر کردن فرم با نام «علی رضایی»، موبایل «09123456789» و ذخیره بدون خطا انجام می‌شود.
- [ ] رکورد جدید در لیست مخاطبین ظاهر می‌شود.
- [ ] (در صورت وجود فیلد Stage) Stage در لیست قابل تغییر است.

---

## گام ۳ — ثبت تماس (Activity)

- [ ] کلیک روی ردیف «علی رضایی» به صفحه جزئیات مخاطب (Lead Detail) یا مودال جزئیات می‌رود.
- [ ] دکمه «ثبت تماس» یا «ثبت فعالیت» وجود دارد.
- [ ] فرم ثبت تماس با نوع «تماس»، نتیجه «پیگیری موفق» و یادداشت «معرفی کوتاه محصول» ذخیره می‌شود.
- [ ] Timeline یا لیست فعالیت‌ها به‌روز می‌شود و آخرین فعالیت نمایش داده می‌شود.

---

## گام ۴ — ایجاد Task

- [ ] دکمه «ایجاد تسک» در صفحه جزئیات یا از منو «کارها» در دسترس است.
- [ ] ایجاد تسک با عنوان «ارسال پیش‌فاکتور» و تاریخ سررسید دو روز بعد بدون خطا انجام می‌شود.
- [ ] تسک در لیست «کارها» یا «تسک‌های من» نمایش داده می‌شود.

---

## گام ۵ — تبدیل لید به مشتری

- [ ] روی لید «علی رضایی» دکمه «تبدیل به مشتری» وجود دارد.
- [ ] با کلیک، تأییدیه (confirm) نمایش داده می‌شود و پس از تأیید، تبدیل انجام می‌شود.
- [ ] در پنل «شرکت‌ها» (یا مشتریان) رکورد جدید مربوط به این مشتری ظاهر می‌شود.
- [ ] اطلاعات منتقل شده و قابل مشاهده است.

---

## گام ۶ — Customer 360°

- [ ] از منو «شرکت‌ها» انتخاب مشتری جدید امکان‌پذیر است.
- [ ] صفحه مانیتورینگ (Customer 360°) یا جزئیات مشتری نمایش داده می‌شود.
- [ ] اطلاعات تماس، تسک‌های باز و فعالیت‌های اخیر (در صورت پیاده‌سازی) قابل مشاهده است.
- [ ] نمای یکپارچه وضعیت فروش و تعاملات بدون خطا نمایش داده می‌شود.

---

## گام ۷ — Billing (تنظیمات → اشتراک)

- [ ] از منو «تنظیمات» قابل دسترسی است (فقط برای OWNER).
- [ ] ورود به «اشتراک و صورتحساب» یا تب/لینک Billing بدون خطا انجام می‌شود.
- [ ] پلن فعال (مثلاً Basic یا نمایشی) و تعداد صندلی مصرف‌شده (مثلاً ۱ از ۲۰) نمایش داده می‌شود.

---

## گام ۸ — خروج

- [ ] دکمه خروج در هدر (کنار آواتار) وجود دارد و با کلیک، خروج انجام می‌شود.
- [ ] ریدایرکت به صفحه لاگین `/t/demo/app/login` انجام می‌شود.
- [ ] توکن پاک شده و درخواست مجدد به APIهای محافظت‌شده بدون لاگین مجدد با 401 پاسخ می‌دهد.

---

## ویژگی‌های کلی (غیر وابسته به گام)

- [ ] RTL در کل اپ رعایت شده است.
- [ ] زمان کل سناریو در شرایط عادی حدود ۴–۶ دقیقه است.
- [ ] هیچ خطای غیرمنتظره در کنسول مرورگر یا در UI نمایش داده نمی‌شود.
- [ ] نقش OWNER در تمام مراحل دسترسی لازم را دارد؛ MEMBER تنظیمات را نمی‌بیند (تست جدا).

---

## یادداشت

- آیتم‌هایی که هنوز در محصول پیاده نشده‌اند (Lead Detail، Timeline، Convert، Customer 360°，Tasks) در سناریوی دمو به‌صورت «بعد از پیاده‌سازی» در نظر گرفته شده‌اند.
- پس از پیاده‌سازی هر قابلیت، گام مربوط در این چک‌لیست قابل اجرا و تیک زدن است.
